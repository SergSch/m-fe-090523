## Практическое занятие №15

### Тема: Работа с асинхронными операциями в JS.

Репозитарий содержит материалы по практическому занятию №15, посвященному работе с асинхронными операциями.

### Цели занятия
- закрепление знаний, полученных на лекциях;
- практическое применение знаний, полученных на лекциях.

### Задачи занятия
1. В файле `./main.js`, определены функции отправки запросов списка категорий (`requestCategories`), и списка товаров (`requestProducts`). Также, определены функции отрисовки категорий и товаров (`renderCategories`, `renderProducts`), которые в аргументах ожидают данные категорий и товаров для отрисовки. В самом низу файла, есть функция `init` - она будет запускаться при запуске скрипта. Нужно сделать так, чтобы в этой функции запрашивались списки товаров и категорий (т.е. вызвать функции `requestProducts`, `requestCategories`), и отрисовать их.
2. Готовим почву для `Promise.all`. У нас есть функция `task2Demo`. В ней есть 2 промиса, каждый из которых возвращает "часть от целого". Нужно дождаться выполнения обеих промисов, и вывести в консоль сумму их результатов. В этом нам поможет `Promise.all`.
3. Теперь, нужно добавить нашу "иконку загрузки". Нужно, чтобы при запуске `init`, мы показывали иконку загрузки. Убрать ее мы должны тогда, когда ОБА наших промиса будут выполнены (в этом нам поможет `Promise.all`). То есть, нам нужно переписать логику функции `init` - вызвать наши `requestProducts`, `requestCategories` в `Promise.all`.
4. Работаем с нештатной ситуацией. У нас есть функция `task4Demo`, в ней также 2 промиса, но второй промис может быть завершен с ошибкой. Нужно построить такую логику, чтобы:
 - при успешном завершении обоих промисов, в консоли выводилась сумма результатов (как в предыдущей задаче)
 - в случае ошибки, в консоль выводилось "something went wrong!", и причина ошибки (то, что передается в `reject`)
 - вне зависимости от результата, чтобы в консоль выводилось "All promises are finished now!".
5. Пишем функцию добавления нового товара `addProduct`. В аргументах она принимает:
 - title - название нового товара
 - price - цена
 - description - описание
 - category - категория товара

Она должна обратиться POST-запросом к адресу `https://fakestoreapi.com/products`, и в теле запроса передать такой объект:

```
{
    title: 'test product',
    price: 13.5,
    description: 'lorem ipsum set',
    image: 'https://i.pravatar.cc',
    category: 'electronic'
}
```
Объект нужно преобразовать в строку (`JSON.stringify`).
6. Пишем функцию удаления товара. Она должна обращаться к адресу `https://fakestoreapi.com/products/PRODUCT_ID`, методом `DELETE`. В адресе нужно вместо PRODUCT_ID подставить ИД того товара, который хотим удалить. Эту функцию нужно вызывать при клике на кнопки "Drop" на карточках товаров.
7. Пишем свою функцию `sendJsonRequest` для отправки сетевого запроса (GET). Она должна принять в аргументе URL, к которому хотим обратиться, и вернуть ПРОМИС, который:
 - в случае успеха, будет зарезолвлен преобразованными в JSON данными с бэка
 - в случае неуспеха, будет вызван `reject`, с текстом ошибки.

### Полезные ссылки
 - [setTimeout, setInterval](https://learn.javascript.ru/settimeout-setinterval) - русскоязычный гайд по таймаутам и интервалам. Настоятельно рекомендуется к прочтению.
 - [Раздел про промисы](https://learn.javascript.ru/async) - это раздел учебника, посвященный промисам. Также настоятельно рекомендуется к прочтению - по этой теме стопроцентно будут вопросы на собеседованиях.
